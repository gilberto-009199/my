/*!
 Buttons for DataTables 1.1.0
 Â©2015 SpryMedia Ltd - datatables.net/license
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"===typeof exports?module.exports=function(c,b){c||(c=window);if(!b||!b.fn.dataTable){b=require("datatables.net")(c,b).$}return a(b,c,c.document)}:a(jQuery,window,document)})(function(q,d,c,f){var i=q.fn.dataTable,v=0,u=0,h=i.ext.buttons,g=function(j,e){!0===e&&(e={});q.isArray(e)&&(e={buttons:e});this.c=q.extend(!0,{},g.defaults,e);e.buttons&&(this.c.buttons=e.buttons);this.s={dt:new i.Api(j),buttons:[],subButtons:[],listenKeys:"",namespace:"dtb"+v++};this.dom={container:q("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)};this._constructor()};q.extend(g.prototype,{action:function(j,e){var k=this._indexToButton(j).conf;if(e===f){return k.action}k.action=e;return this},active:function(j,e){this._indexToButton(j).node.toggleClass(this.c.dom.button.active,e===f?!0:e);return this},add:function(j,e){if("string"===typeof j&&-1!==j.indexOf("-")){var k=j.split("-");this.c.buttons[1*k[0]].buttons.splice(1*k[1],0,e)}else{this.c.buttons.splice(1*j,0,e)}this.dom.container.empty();this._buildButtons(this.c.buttons);return this},container:function(){return this.dom.container},disable:function(e){this._indexToButton(e).node.addClass(this.c.dom.button.disabled);return this},destroy:function(){q("body").off("keyup."+this.s.namespace);var j=this.s.buttons,e=this.s.subButtons,m,l,k;m=0;for(j=j.length;m<j;m++){this.removePrep(m);l=0;for(k=e[m].length;l<k;l++){this.removePrep(m+"-"+l)}}this.removeCommit();this.dom.container.remove();e=this.s.dt.settings()[0];m=0;for(j=e.length;m<j;m++){if(e.inst===this){e.splice(m,1);break}}return this},enable:function(j,e){if(!1===e){return this.disable(j)}this._indexToButton(j).node.removeClass(this.c.dom.button.disabled);return this},name:function(){return this.c.name},node:function(e){return this._indexToButton(e).node},removeCommit:function(){var j=this.s.buttons,e=this.s.subButtons,l,k;for(l=j.length-1;0<=l;l--){null===j[l]&&(j.splice(l,1),e.splice(l,1),this.c.buttons.splice(l,1))}l=0;for(j=e.length;l<j;l++){for(k=e[l].length-1;0<=k;k--){null===e[l][k]&&(e[l].splice(k,1),this.c.buttons[l].buttons.splice(k,1))}}return this},removePrep:function(j){var e,l=this.s.dt;if("number"===typeof j||-1===j.indexOf("-")){e=this.s.buttons[1*j],e.conf.destroy&&e.conf.destroy.call(l.button(j),l,e,e.conf),e.node.remove(),this._removeKey(e.conf),this.s.buttons[1*j]=null}else{var k=j.split("-");e=this.s.subButtons[1*k[0]][1*k[1]];e.conf.destroy&&e.conf.destroy.call(l.button(j),l,e,e.conf);e.node.remove();this._removeKey(e.conf);this.s.subButtons[1*k[0]][1*k[1]]=null}return this},text:function(k,j){var o=this._indexToButton(k),n=this.c.dom.collection.buttonLiner,n="string"===typeof k&&-1!==k.indexOf("-")&&n&&n.tag?n.tag:this.c.dom.buttonLiner.tag,m=this.s.dt,l=function(e){return"function"===typeof e?e(m,o.node,o.conf):e};if(j===f){return l(o.conf.text)}o.conf.text=j;n?o.node.children(n).html(l(j)):o.node.html(l(j));return this},toIndex:function(k){var j,o,n,m;n=this.s.buttons;var l=this.s.subButtons;j=0;for(o=n.length;j<o;j++){if(n[j].node[0]===k){return j+""}}j=0;for(o=l.length;j<o;j++){n=0;for(m=l[j].length;n<m;n++){if(l[j][n].node[0]===k){return j+"-"+n}}}},_constructor:function(){var j=this,e=this.s.dt,k=e.settings()[0];k._buttons||(k._buttons=[]);k._buttons.push({inst:this,name:this.c.name});this._buildButtons(this.c.buttons);e.on("destroy",function(){j.destroy()});q("body").on("keyup."+this.s.namespace,function(l){if(!c.activeElement||c.activeElement===c.body){var m=String.fromCharCode(l.keyCode).toLowerCase();j.s.listenKeys.toLowerCase().indexOf(m)!==-1&&j._keypress(m,l)}})},_addKey:function(e){e.key&&(this.s.listenKeys+=q.isPlainObject(e.key)?e.key.key:e.key)},_buildButtons:function(r,p,o){var n=this.s.dt;p||(p=this.dom.container,this.s.buttons=[],this.s.subButtons=[]);for(var m=0,l=r.length;m<l;m++){var k=this._resolveExtends(r[m]);if(k){if(q.isArray(k)){this._buildButtons(k,p,o)}else{var j=this._buildButton(k,o!==f?!0:!1);if(j){var e=j.node;p.append(j.inserter);o===f?(this.s.buttons.push({node:e,conf:k,inserter:j.inserter}),this.s.subButtons.push([])):this.s.subButtons[o].push({node:e,conf:k,inserter:j.inserter});k.buttons&&(j=this.c.dom.collection,k._collection=q("<"+j.tag+"/>").addClass(j.className),this._buildButtons(k.buttons,k._collection,m));k.init&&k.init.call(n.button(e),n,e,k)}}}}},_buildButton:function(j,e){var p=this.c.dom.button,o=this.c.dom.buttonLiner,n=this.c.dom.collection,m=this.s.dt,l=function(r){return"function"===typeof r?r(m,k,j):r};e&&n.button&&(p=n.button);e&&n.buttonLiner&&(o=n.buttonLiner);if(j.available&&!j.available(m,j)){return !1}var k=q("<"+p.tag+"/>").addClass(p.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(r){r.preventDefault();!k.hasClass(p.disabled)&&j.action&&j.action.call(m.button(k),r,m,k,j);k.blur()}).on("keyup.dtb",function(r){r.keyCode===13&&!k.hasClass(p.disabled)&&j.action&&j.action.call(m.button(k),r,m,k,j)});o.tag?k.append(q("<"+o.tag+"/>").html(l(j.text)).addClass(o.className)):k.html(l(j.text));!1===j.enabled&&k.addClass(p.disabled);j.className&&k.addClass(j.className);j.titleAttr&&k.attr("title",j.titleAttr);j.namespace||(j.namespace=".dt-button-"+u++);o=(o=this.c.dom.buttonContainer)?q("<"+o.tag+"/>").addClass(o.className).append(k):k;this._addKey(j);return{node:k,inserter:o}},_indexToButton:function(e){if("number"===typeof e||-1===e.indexOf("-")){return this.s.buttons[1*e]}e=e.split("-");return this.s.subButtons[1*e[0]][1*e[1]]},_keypress:function(j,e){var p,o,n,m;n=this.s.buttons;var l=this.s.subButtons,k=function(s,r){if(s.key){if(s.key===j){r.click()}else{if(q.isPlainObject(s.key)&&s.key.key===j&&(!s.key.shiftKey||e.shiftKey)){if(!s.key.altKey||e.altKey){if(!s.key.ctrlKey||e.ctrlKey){(!s.key.metaKey||e.metaKey)&&r.click()}}}}}};p=0;for(o=n.length;p<o;p++){k(n[p].conf,n[p].node)}p=0;for(o=l.length;p<o;p++){n=0;for(m=l[p].length;n<m;n++){k(l[p][n].conf,l[p][n].node)}}},_removeKey:function(j){if(j.key){var e=q.isPlainObject(j.key)?j.key.key:j.key,j=this.s.listenKeys.split(""),e=q.inArray(e,j);j.splice(e,1);this.s.listenKeys=j.join("")}},_resolveExtends:function(j){for(var e=this.s.dt,o,n,m=function(r){for(var p=0;!q.isPlainObject(r)&&!q.isArray(r);){if(r===f){return}if("function"===typeof r){if(r=r(e,j),!r){return !1}}else{if("string"===typeof r){if(!h[r]){throw"Unknown button type: "+r}r=h[r]}}p++;if(30<p){throw"Buttons: Too many iterations"}}return q.isArray(r)?r:q.extend({},r)},j=m(j);j&&j.extend;){if(!h[j.extend]){throw"Cannot extend unknown button type: "+j.extend}var l=m(h[j.extend]);if(q.isArray(l)){return l}if(!l){return !1}o=l.className;j=q.extend({},l,j);o&&j.className!==o&&(j.className=o+" "+j.className);var k=j.postfixButtons;if(k){j.buttons||(j.buttons=[]);o=0;for(n=k.length;o<n;o++){j.buttons.push(k[o])}j.postfixButtons=null}if(k=j.prefixButtons){j.buttons||(j.buttons=[]);o=0;for(n=k.length;o<n;o++){j.buttons.splice(o,0,k[o])}j.prefixButtons=null}j.extend=l.extend}return j}});g.background=function(j,e,k){k===f&&(k=400);j?q("<div/>").addClass(e).css("display","none").appendTo("body").fadeIn(k):q("body > div."+e).fadeOut(k,function(){q(this).remove()})};g.instanceSelector=function(j,e){if(!j){return q.map(e,function(n){return n.inst})}var m=[],l=q.map(e,function(n){return n.name}),k=function(n){if(q.isArray(n)){for(var p=0,o=n.length;p<o;p++){k(n[p])}}else{"string"===typeof n?-1!==n.indexOf(",")?k(n.split(",")):(n=q.inArray(q.trim(n),l),-1!==n&&m.push(e[n].inst)):"number"===typeof n&&m.push(e[n].inst)}};k(j);return m};g.buttonSelector=function(j,e){for(var n=[],m=function(p,o){var w,t,s=[];q.each(o.s.buttons,function(y,x){null!==x&&s.push({node:x.node[0],name:x.name})});q.each(o.s.subButtons,function(y,x){q.each(x,function(A,z){null!==z&&s.push({node:z.node[0],name:z.name})})});w=q.map(s,function(x){return x.node});if(q.isArray(p)||p instanceof q){w=0;for(t=p.length;w<t;w++){m(p[w],o)}}else{if(null===p||p===f||"*"===p){w=0;for(t=s.length;w<t;w++){n.push({inst:o,idx:o.toIndex(s[w].node)})}}else{if("number"===typeof p){n.push({inst:o,idx:p})}else{if("string"===typeof p){if(-1!==p.indexOf(",")){var r=p.split(",");w=0;for(t=r.length;w<t;w++){m(q.trim(r[w]),o)}}else{if(p.match(/^\d+(\-\d+)?$/)){n.push({inst:o,idx:p})}else{if(-1!==p.indexOf(":name")){r=p.replace(":name","");w=0;for(t=s.length;w<t;w++){s[w].name===r&&n.push({inst:o,idx:o.toIndex(s[w].node)})}}else{q(w).filter(p).each(function(){n.push({inst:o,idx:o.toIndex(this)})})}}}}else{"object"===typeof p&&p.nodeName&&(t=q.inArray(p,w),-1!==t&&n.push({inst:o,idx:o.toIndex(w[t])}))}}}}},l=0,k=j.length;l<k;l++){m(e,j[l])}return n};g.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}};g.version="1.1.0";q.extend(h,{collection:{text:function(e){return e.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(j,e,n,m){var j=n.offset(),e=q(e.table().container()),l=!1;q("div.dt-button-background").length&&(l=q("div.dt-button-collection").offset(),q(c).trigger("click.dtb-collection"));m._collection.addClass(m.collectionLayout).css("display","none").appendTo("body").fadeIn(m.fade);var k=m._collection.css("position");l&&"absolute"===k?m._collection.css({top:l.top+5,left:l.left+5}):"absolute"===k?(m._collection.css({top:j.top+n.outerHeight(),left:j.left}),n=j.left+m._collection.outerWidth(),e=e.offset().left+e.width(),n>e&&m._collection.css("left",j.left-(n-e))):(j=m._collection.height()/2,j>q(d).height()/2&&(j=q(d).height()/2),m._collection.css("marginTop",-1*j));m.background&&g.background(!0,m.backgroundClassName,m.fade);setTimeout(function(){q("div.dt-button-background").on("click.dtb-collection",function(){});q("body").on("click.dtb-collection",function(o){if(!q(o.target).parents().andSelf().filter(m._collection).length){m._collection.fadeOut(m.fade,function(){m._collection.detach()});q("div.dt-button-background").off("click.dtb-collection");g.background(false,m.backgroundClassName,m.fade);q("body").off("click.dtb-collection")}})},10)},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",fade:400},copy:function(j,e){if(h.copyHtml5){return"copyHtml5"}if(h.copyFlash&&h.copyFlash.available(j,e)){return"copyFlash"}},csv:function(j,e){if(h.csvHtml5&&h.csvHtml5.available(j,e)){return"csvHtml5"}if(h.csvFlash&&h.csvFlash.available(j,e)){return"csvFlash"}},excel:function(j,e){if(h.excelHtml5&&h.excelHtml5.available(j,e)){return"excelHtml5"}if(h.excelFlash&&h.excelFlash.available(j,e)){return"excelFlash"}},pdf:function(j,e){if(h.pdfHtml5&&h.pdfHtml5.available(j,e)){return"pdfHtml5"}if(h.pdfFlash&&h.pdfFlash.available(j,e)){return"pdfFlash"}},pageLength:function(j){var j=j.settings()[0].aLengthMenu,e=q.isArray(j[0])?j[0]:j,l=q.isArray(j[0])?j[1]:j,k=function(m){return m.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},m.page.len())};return{extend:"collection",text:k,className:"buttons-page-length",buttons:q.map(e,function(n,m){return{text:l[m],action:function(o,p){p.page.len(n).draw()},init:function(o,s,r){var p=this,s=function(){p.active(o.page.len()===n)};o.on("length.dt"+r.namespace,s);s()},destroy:function(p,o,r){p.off("length.dt"+r.namespace)}}}),init:function(n,m,p){var o=this;n.on("length.dt"+p.namespace,function(){o.text(k(n))})},destroy:function(n,m,o){n.off("length.dt"+o.namespace)}}}});i.Api.register("buttons()",function(j,e){e===f&&(e=j,j=f);return this.iterator(!0,"table",function(k){if(k._buttons){return g.buttonSelector(g.instanceSelector(j,k._buttons),e)}},!0)});i.Api.register("button()",function(j,e){var k=this.buttons(j,e);1<k.length&&k.splice(1,k.length);return k});i.Api.register(["buttons().active()","button().active()"],function(e){return this.each(function(j){j.inst.active(j.idx,e)})});i.Api.registerPlural("buttons().action()","button().action()",function(e){return e===f?this.map(function(j){return j.inst.action(j.idx)}):this.each(function(j){j.inst.action(j.idx,e)})});i.Api.register(["buttons().enable()","button().enable()"],function(e){return this.each(function(j){j.inst.enable(j.idx,e)})});i.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(e){e.inst.disable(e.idx)})});i.Api.registerPlural("buttons().nodes()","button().node()",function(){var e=q();q(this.each(function(j){e=e.add(j.inst.node(j.idx))}));return e});i.Api.registerPlural("buttons().text()","button().text()",function(e){return e===f?this.map(function(j){return j.inst.text(j.idx)}):this.each(function(j){j.inst.text(j.idx,e)})});i.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(e){e.inst.node(e.idx).trigger("click")})});i.Api.registerPlural("buttons().containers()","buttons().container()",function(){var e=q();q(this.each(function(j){e=e.add(j.inst.container())}));return e});i.Api.register("button().add()",function(j,e){1===this.length&&this[0].inst.add(j,e);return this.button(j)});i.Api.register("buttons().destroy()",function(){this.pluck("inst").unique().each(function(e){e.destroy()});return this});i.Api.registerPlural("buttons().remove()","buttons().remove()",function(){this.each(function(e){e.inst.removePrep(e.idx)});this.pluck("inst").unique().each(function(e){e.removeCommit()});return this});var b;i.Api.register("buttons.info()",function(j,e,l){var k=this;if(!1===j){return q("#datatables_buttons_info").fadeOut(function(){q(this).remove()}),clearTimeout(b),b=null,this}b&&clearTimeout(b);q("#datatables_buttons_info").length&&q("#datatables_buttons_info").remove();q('<div id="datatables_buttons_info" class="dt-button-info"/>').html(j?"<h2>"+j+"</h2>":"").append(q("<div/>")["string"===typeof e?"html":"append"](e)).css("display","none").appendTo("body").fadeIn();l!==f&&0!==l&&(b=setTimeout(function(){k.buttons.info(!1)},l));return this});i.Api.register("buttons.exportData()",function(C){if(this.context.length){for(var B=new i.Api(this.context[0]),A=q.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(k){return z(k)},footer:function(k){return z(k)},body:function(k){return z(k)}}},C),z=function(k){if("string"!==typeof k){return k}A.stripHtml&&(k=k.replace(/<.*?>/g,""));A.trim&&(k=k.replace(/^\s+|\s+$/g,""));A.stripNewlines&&(k=k.replace(/\n/g," "));A.decodeEntities&&(a.innerHTML=k,k=a.value);return k},C=B.columns(A.columns).indexes().map(function(k){return A.format.header(B.column(k).header().innerHTML,k)}).toArray(),y=B.table().footer()?B.columns(A.columns).indexes().map(function(k){var l=B.column(k).footer();return A.format.footer(l?l.innerHTML:"",k)}).toArray():null,x=B.rows(A.rows,A.modifier).indexes().toArray(),x=B.cells(x,A.columns).render(A.orthogonal).toArray(),w=C.length,t=0<w?x.length/w:0,s=Array(t),r=0,p=0;p<t;p++){for(var e=Array(w),j=0;j<w;j++){e[j]=A.format.body(x[r],j,p),r++}s[p]=e}return{header:C,footer:y,body:s}}});var a=q("<textarea/>")[0];q.fn.dataTable.Buttons=g;q.fn.DataTable.Buttons=g;q(c).on("init.dt plugin-init.dt",function(j,e){if("dt"===j.namespace){var k=e.oInit.buttons||i.defaults.buttons;k&&!e._buttons&&(new g(e,k)).container()}});i.ext.feature.push({fnInit:function(j){var j=new i.Api(j),e=j.init().buttons||i.defaults.buttons;return(new g(j,e)).container()},cFeature:"B"});return g});